# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

## üìã –ó–∞–¥–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –¥–≤—É–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –∏ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. **–õ–∏–Ω–∫–æ–≤–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** (program1)
2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (program2)

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. PrimeCount(int A, int B)
–ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [A, B]

| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –ê–ª–≥–æ—Ä–∏—Ç–º | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|------------|----------|-----------|
| **libimpl1.so** | –ù–∞–∏–≤–Ω—ã–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ª–∏–º–æ—Å—Ç–∏) | O(n √ó ‚àön) |
| **libimpl2.so** | –†–µ—à–µ—Ç–æ –≠—Ä–∞—Ç–æ—Å—Ñ–µ–Ω–∞ | O(n √ó log log n) |

#### 2.  Square(float A, float B)
–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∏ —Ñ–∏–≥—É—Ä—ã –ø–æ –¥–≤—É–º —Å—Ç–æ—Ä–æ–Ω–∞–º

| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –§–∏–≥—É—Ä–∞ | –§–æ—Ä–º—É–ª–∞ |
|------------|--------|---------|
| **libimpl1.so** | –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ | S = A √ó B |
| **libimpl2.so** | –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ | S = (A √ó B) / 2 |

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
dynamic_libs_lab/
‚îú‚îÄ‚îÄ contract.h           # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–π)
‚îú‚îÄ‚îÄ implementation1. c    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è 1 (–Ω–∞–∏–≤–Ω—ã–π + –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)
‚îú‚îÄ‚îÄ implementation2.c    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è 2 (—Ä–µ—à–µ—Ç–æ + —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)
‚îú‚îÄ‚îÄ program1.c           # –ü—Ä–æ–≥—Ä–∞–º–º–∞ 1: –ª–∏–Ω–∫–æ–≤–∫–∞ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
‚îú‚îÄ‚îÄ program2.c           # –ü—Ä–æ–≥—Ä–∞–º–º–∞ 2: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
‚îú‚îÄ‚îÄ Makefile             # –ï–¥–∏–Ω—ã–π Makefile –¥–ª—è —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ README. md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

**–ó–∞—á–µ–º —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ?** –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ ‚Üí –ø—Ä–æ—â–µ –ø–æ–Ω—è—Ç—å ‚Üí –±—ã—Å—Ç—Ä–µ–µ —Å–¥–∞—Ç—å!  üöÄ

---

## üîß –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
make
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º
```bash
# –ü—Ä–æ–≥—Ä–∞–º–º–∞ 1 (–ª–∏–Ω–∫–æ–≤–∫–∞)
make run1

# –ò–õ–ò –Ω–∞–ø—Ä—è–º—É—é
./program1
```

```bash
# –ü—Ä–æ–≥—Ä–∞–º–º–∞ 2 (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
make run2

# –ò–õ–ò –Ω–∞–ø—Ä—è–º—É—é
./program2
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test
```

### –û—á–∏—Å—Ç–∫–∞
```bash
make clean
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–æ–º–∞–Ω–¥—ã (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –æ–±–µ–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º):

```
1 A B   - –≤—ã–∑–æ–≤ PrimeCount(A, B)
2 A B   - –≤—ã–∑–æ–≤ Square(A, B)
exit    - –≤—ã—Ö–æ–¥
```

**–¢–æ–ª—å–∫–æ –¥–ª—è program2:**
```
0       - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–¥–ª—è –æ—Ü–µ–Ω–∫–∏ 5!)
```

### –ü—Ä–∏–º–µ—Ä—ã –≤–≤–æ–¥–∞:

```bash
>>> 1 10 50
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 11 (–ø—Ä–æ—Å—Ç—ã–µ: 11,13,17,19,23,29,31,37,41,43,47)

>>> 2 5 10
# libimpl1.so: 50.00 (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)
# libimpl2.so: 25.00 (—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)

>>> 0
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Ç–æ–ª—å–∫–æ program2)
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–¢–µ—Å—Ç: `1 1 100000` (–ø—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞ –æ—Ç 1 –¥–æ 100000)

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ê–ª–≥–æ—Ä–∏—Ç–º | –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è |
|------------|----------|-----------------|
| libimpl1.so | –ù–∞–∏–≤–Ω—ã–π | ~5-10 —Å–µ–∫—É–Ω–¥ |
| libimpl2.so | –†–µ—à–µ—Ç–æ –≠—Ä–∞—Ç–æ—Å—Ñ–µ–Ω–∞ | ~0.01 —Å–µ–∫—É–Ω–¥ |

**–í—ã–≤–æ–¥:** –†–µ—à–µ—Ç–æ –≠—Ä–∞—Ç–æ—Å—Ñ–µ–Ω–∞ –≤ **500+ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**!  üöÄ

---

## üîç –ê–Ω–∞–ª–∏–∑ –¥–≤—É—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫

### 1Ô∏è‚É£ –õ–∏–Ω–∫–æ–≤–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (program1)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```c
// –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏–∑ contract.h
int result = PrimeCount(10, 50);
```
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–ª–∞–≥–æ–º `-limpl1` –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. 

**‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–µ–µ (—Å–∏–º–≤–æ–ª—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- –ü—Ä–æ—â–µ –∫–æ–¥ (–Ω–µ –Ω—É–∂–µ–Ω dlopen/dlsym)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ú–µ–Ω—å—à–µ —à–∞–Ω—Å–æ–≤ –Ω–∞ runtime-–æ—à–∏–±–∫–∏

**‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ñ—ë—Å—Ç–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–¥–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

### 2Ô∏è‚É£ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (program2)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```c
void *handle = dlopen("./libimpl1.so", RTLD_LAZY);
PrimeCountFunc func = dlsym(handle, "PrimeCount");
int result = func(10, 50);
```

**‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –ë–ï–ó –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–∫–æ–º–∞–Ω–¥–∞ `0`)
- –ü–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã

**‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ë–æ–ª—å—à–µ –∫–æ–¥–∞ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ dlopen/dlsym/dlclose)
- –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –≤ runtime)
- –ù—É–∂–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

---


## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–û–°:** Linux/Unix (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç POSIX API)
- **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä:** GCC
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:** `-lm` (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞), `-ldl` (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- **–§–ª–∞–≥–∏:** `-fPIC` (Position Independent Code –¥–ª—è . so)

---

